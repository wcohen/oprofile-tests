This testsuite directory contains a simple testsuite to check the
functionality of OProfile on the machine. The testsuite supports testing
the previous user interface using opcontrol and the new operf interface.

The testsuite consists of several workloads.  Each workload is run using
an architecture specific list of event sets.  The OProfile report for
each workload run is then checked to make sure the expected symbols that
are specific to that workload are found in the profile report.


Running the opcontrol OProfile testsuite requires the following:

-Superuser privileges
-The dejagnu and expect packages are installed
-The OProfile commands to be on the PATH

The opcontrol tests are run by being in this directory and running the
following command:

runtest --tool oprofile-opcontrol


The system-wide operf OProfile testsuite requires the following:

-Superuser privileges
-The dejagnu and expect packages are installed
-The OProfile commands to be on the PATH

The system-wide operf tests are run by being in this directory and running
the following command:

runtest --tool oprofile-operf

The single process operf testsuite requires the following:

-The dejagnu and expect packages are installed
-The OProfile commands to be on the PATH
-Note, you should run the command "opcontrol --reset" as root to make sure
 there are no opcontrol data samples around that opreport might accidentally
 pickup on.  The testsuite is setup so it can run as a regular user.  Regular
 users can't delete the opcontrol data.
-In order to run oprofile--single_process as an normal user, the testsuite
 directories need to be writable by normal user running the test.

The single process operf tests are run by being in this directory and running
the following command as either root or a normal user:

runtest --tool oprofile-single_process

To run all three testsuites (provided the requirements for all of them are
met), use the command

runtest --tool oprofile


The tests will run and at the end should print out the number of tests
that passed and failed. Ideally, there should be no failures listed,
only "# of expected passes".

The testsuite is flexible and should run on a variety of different
architectures without change, but there may be some architectures
which are not yet included in the testsuite.

The testsuite suite is not a exhaustive test of all the options and
features of OProfile. It is designed to automate the simple smoke
tests that people commonly do to make sure that nothing is "horribly
wrong" and that the basic functionality works.

Comments about and additions to the testsuite infrastructure are
appreciated.

-Will
